generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Roles {
  id          Int        @id @default(autoincrement())
  nombre      String     @unique
  descripcion String?
  usuarios    Usuarios[]
}

model Usuarios {
  id            Int        @id @default(autoincrement())
  nombre        String
  apellido      String
  correo        String     @unique
  telefono      String?
  fechaRegistro DateTime   @default(now())
  password      String     @default("cambiar")
  rolId         Int
  rol           Roles      @relation(fields: [rolId], references: [id])
  reservas      Reservas[] @relation("ClienteReservas")
  gestiona      Reservas[] @relation("AdminReservas")
}

model Mesas {
  id         Int        @id @default(autoincrement())
  capacidad  Int
  numeroMesa Int
  ubicacion  String?
  estado     String     @default("disponible")
  reservas   Reservas[]
}

model Reservas {
  id                Int       @id @default(autoincrement())
  fechaReserva      DateTime
  horaInicioReserva DateTime
  horaFinReserva    DateTime
  estadoReserva     String    @default("pendiente")
  cantidadPersonas  Int
  fechaSolicitado   DateTime  @default(now())
  idMesa            Int
  mesa              Mesas     @relation(fields: [idMesa], references: [id])
  idUsuario         Int
  usuario           Usuarios  @relation("ClienteReservas", fields: [idUsuario], references: [id])
  idAdmin           Int?
  admin             Usuarios? @relation("AdminReservas", fields: [idAdmin], references: [id])
}
